$(function () { setDocTitle("选择地区"); loadArea(); loadCurrentArea(); $(document).on("tap", ".provinceList", function () { if ($(this).hasClass("totalProvince")) { var a = $(this).text(); $("#choiceAreaId").find(".choice-block").empty().hide(); $("#choiceAreaId").find(".choice-city").empty().hide(); $("#choiceAreaId").find(".choice-province").empty().text(a); location.href = basePath + "lawMobile/lawArea.jsp?p=" + a + "&c=&b=" } else { if ($(this).hasClass("province-cur")) { $(this).removeClass("province-cur"); $(this).next().hide(); $(this).closest(".province-items").siblings().show(); $("#backId").show() } else { var b = $(this).closest(".province-items"); var a = $(this).find(".province-name").text(); $("#currentAreaId").hide(); $("#choiceAreaId").find(".choice-block").empty().hide(); $("#choiceAreaId").find(".choice-city").empty().hide(); $("#choiceAreaId").find(".choice-province").empty().text(a); $("#choiceAreaId").show(); b.siblings().hide(); $(this).addClass("province-cur"); $(this).next().show(); $("#backId").hide() } } }); $(document).on("tap", ".cityList", function () { if ($(this).hasClass("municipality")) { var a = $(this).attr("data-municipality"); $("#choiceAreaId").find(".choice-block").empty().hide(); $("#choiceAreaId").find(".choice-city").empty().hide(); $("#choiceAreaId").find(".choice-province").empty().text(a); location.href = basePath + "lawMobile/lawArea.jsp?p=" + a + "&c=&b=" } else { if ($(this).hasClass("city-cur")) { $(this).removeClass("city-cur"); $(this).next().hide(); $(this).closest(".city-content-items").siblings().show() } else { var b = $(this).attr("data-block"); var c = $(this).find(".city-name").text(); if (c == "市辖区" || c == "县") { $("#choiceAreaId").find(".choice-city").empty().text("").show() } else { $("#choiceAreaId").find(".choice-city").empty().text(c).show() } if (b == "true") { $parent = $(this).closest(".city-content-items"); $parent.siblings().hide(); $(this).addClass("city-cur"); $(this).next().show() } else { var a = $("#choiceAreaId").find(".choice-province").text(); var c = $("#choiceAreaId").find(".choice-city").text(); location.href = basePath + "lawMobile/lawArea.jsp?p=" + a + "&c=" + c } } } }); $(document).on("tap", ".block-items", function () { if ($(this).hasClass("dataWholeCity")) { var a = $("#choiceAreaId").find(".choice-province").text(); var c = $("#choiceAreaId").find(".choice-city").text(); location.href = basePath + "lawMobile/lawArea.jsp?p=" + a + "&c=" + c + "&b=" } else { var b = $(this).text(); var a = $("#choiceAreaId").find(".choice-province").text(); var c = $("#choiceAreaId").find(".choice-city").text(); $("#choiceAreaId").find(".choice-block").empty().text(b).show(); location.href = basePath + "lawMobile/lawArea.jsp?p=" + a + "&c=" + c + "&b=" + b } }) }); function loadArea() { var e = ""; for (var d = 0; d < 5; d++) { var f = provinceList[d]; e += '<div class="province-items"><div class="provinceList"><span class="province-name">' + f.name + '</span><span class="pro-ico"></span></div><div class="city-content">'; e += '<div class="city-content-items"><div class="cityList municipality" data-municipality="' + f.cityList[0].name + '"><span class="city-name">' + f.cityList[0].name + "(全部)</span></div></div>"; for (var c = 1; c < f.cityList.length; c++) { var g = f.cityList[c]; var a = g.areaList.length; if (a == 0 || a == null || a == undefined) { e += '<div class="city-content-items"><div class="cityList" data-block="false"><span class="city-name">' + g.name + '</span><span class="city-ico"></span></div></div>' } else { e += '<div class="city-content-items"><div class="cityList" data-block="true"><span class="city-name">' + g.name + '</span><span class="city-ico"></span></div><ul class="block-wrap">'; for (var b = 0; b < a; b++) { var h = g.areaList; e += '<li class="block-items">' + h[b] + "</li>" } e += "</ul></div>" } } e += "</div></div>" } for (var d = 5; d < provinceList.length; d++) { var f = provinceList[d]; e += '<div class="province-items"><div class="provinceList"><span class="province-name">' + f.name + '</span><span class="pro-ico"></span></div><div class="city-content">'; for (var c = 0; c < f.cityList.length; c++) { var g = f.cityList[c]; var a = g.areaList.length; if (a == 0 || a == null || a == undefined) { e += '<div class="city-content-items"><div class="cityList" data-block="false"><span class="city-name">' + g.name + '</span><span class="city-ico"></span></div></div>' } else { e += '<div class="city-content-items"><div class="cityList" data-block="true"><span class="city-name">' + g.name + '</span><span class="city-ico"></span></div><ul class="block-wrap">'; e += '<li class="block-items dataWholeCity">' + g.areaList[0] + "(全部)</li>"; for (var b = 1; b < a; b++) { var h = g.areaList; e += '<li class="block-items">' + h[b] + "</li>" } e += "</ul></div>" } } e += "</div></div>" } $("#provinceWrapId").empty().append(e) } function loadCurrentArea() { var a = $("#provinceFlagId").val(); var c = $("#cityFlagId").val(); var b = $("#blockFlagId").val(); if (a == "" || a == "null" || a == null || a == undefined) { $("#currentAreaId .current-province").empty().text("") } else { $("#currentAreaId .current-province").empty().text(a) } if (c == "" || c == "null" || c == null || c == undefined) { $("#currentAreaId .current-city").empty().text("") } else { $("#currentAreaId .current-city").empty().text(c) } if (b == "" || b == "null" || b == null || b == undefined) { $("#currentAreaId .current-block").empty().text("") } else { $("#currentAreaId .current-block").empty().text(b) } } function backToLawArea() { var a = $("#provinceFlagId").val(); var c = $("#cityFlagId").val(); var b = $("#blockFlagId").val(); if (b == "" || b == "null" || b == null || b == undefined) { location.href = basePath + "lawMobile/lawArea.jsp?p=" + a + "&c=" + c } else { location.href = basePath + "lawMobile/lawArea.jsp?p=" + a + "&c=" + c + "&b=" + b } };